# Epic 2.1: Replace ReadingScreen Mock Data with Real API Integration

## Epic Goal

Replace all mock data in ReadingScreen with real API data to provide users with actual chapter content, navigation, and reading progress from the backend system.

## Epic Description

**Existing System Context:**

- Current ReadingScreen uses hardcoded mock data for user IDs, novel IDs, chapter IDs, and chapter lists
- Technology stack: Kotlin 2.0.21, Jetpack Compose, Hilt DI, Retrofit for API calls
- Integration points: ChapterApiService, ReadingProgressViewModel, existing repository pattern
- Current architecture: Clean Architecture with MVVM pattern already established

**Enhancement Details:**

- What's being added/changed: Replace mock data with real API calls for chapter content, navigation, and chapter lists
- How it integrates: Extend existing ChapterApiService, create ChapterRepository, integrate with ReadingScreen ViewModel
- Success criteria: ReadingScreen displays real chapter data, proper navigation between chapters, accurate chapter lists

## Stories

1. **Story 2.1.1:** Create Chapter Repository and API Integration Layer
2. **Story 2.1.2:** Replace Mock Data with Real Chapter Content in ReadingScreen
3. **Story 2.1.3:** Implement Real Chapter Navigation and Chapter List Functionality

## Compatibility Requirements

- [ ] Existing ReadingScreen UI/UX remains unchanged
- [ ] Reading settings and progress tracking functionality preserved
- [ ] Backward compatibility with existing reading progress data
- [ ] Performance impact is minimal with proper caching
- [ ] Error handling maintains user experience

## Risk Mitigation

- **Primary Risk:** API failures could break reading experience
- **Mitigation:** Implement proper error handling, loading states, and fallback mechanisms
- **Rollback Plan:** Keep mock data as fallback option, feature flag to switch between mock and real data

## Definition of Done

- [x] All stories completed with acceptance criteria met
- [x] ReadingScreen displays real chapter content from API
- [x] Chapter navigation works with real data
- [x] Chapter list shows actual chapters from backend
- [x] Error handling and loading states implemented
- [x] Existing reading functionality preserved
- [x] Unit tests cover new repository and ViewModel logic
- [x] Integration tests verify API integration
- [x] No regression in existing features

## Technical Implementation Notes

**API Endpoints Available:**
- `GET /chapters/{chapterId}` - Get specific chapter content
- `GET /chapters/novels/{novelId}` - Get all chapters for a novel

**Integration Points:**
- ChapterApiService (already exists)
- ReadingScreen ViewModel (needs extension)
- New ChapterRepository (to be created)
- Existing ReadingProgressViewModel (preserve functionality)

**Data Flow:**
1. ReadingScreen receives novelId and chapterId from navigation
2. ChapterRepository fetches chapter content via ChapterApiService
3. ViewModel manages state and provides data to UI
4. UI displays real content with existing styling and functionality

## Success Metrics

- ReadingScreen loads real chapter content successfully
- Chapter navigation works seamlessly with real data
- Chapter list displays actual chapters from backend
- Error states are handled gracefully
- Performance remains acceptable (< 2s load time)
- No crashes or data corruption
